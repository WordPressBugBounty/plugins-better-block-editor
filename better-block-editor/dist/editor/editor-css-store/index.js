(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{useAddEditorStyle:()=>S});var r={};e.r(r),e.d(r,{getStyles:()=>p});var n={};e.r(n),e.d(n,{deleteStyle:()=>f,setStyle:()=>y});const o=window.wp.data,c=window.wp.element,i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const u=new Uint8Array(16),d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));const l=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();const n=(e=e||{}).random??e.rng?.()??function(){if(!s){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");s=crypto.getRandomValues.bind(crypto)}return s(u)}();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase()}(n)},a="wpbbe-block-editor-identifier";function p(e){return e.styles}function y(e,t,r){return{type:"SET_STYLE",id:t,scope:e,style:r}}function f(e,t){return{type:"DELETE_STYLE",id:t,scope:e}}const b={reducer:(0,o.combineReducers)({styles:function(e=new Map,t){const r=new Map(e);switch(t.type){case"SET_STYLE":return r.has(t.scope)||r.set(t.scope,new Map),r.get(t.scope).set(t.id,t.style),r;case"DELETE_STYLE":return r.has(t.scope)&&r.get(t.scope).delete(t.id),r}return e}}),selectors:r,actions:n},w=(0,o.createReduxStore)("wpbbe/block-editor",{...b});(0,o.register)(w);const m="wpbbe-style-sheet",g=new WeakMap;function S(e,t){const{setStyle:r,deleteStyle:n}=(0,o.dispatch)(w),i=(0,c.useRef)(null);return(0,c.useCallback)((c=>{if(null===c)return void(i.current&&n(i.current,t));if(c.ownerDocument[a]||(c.ownerDocument[a]=l()),i.current=c.ownerDocument[a],!e||Array.isArray(e)&&0===e.length)n(i.current,t);else{const n=Array.isArray(e)?e:[e];r(i.current,t,n)}const s=(0,o.select)(w).getStyles().get(i.current)||new Map,u=[];for(const[,e]of s)Array.isArray(e)?u.push(...e):u.push(e);!function(e,t){if(!e)return;const r=t.join("\n");g.get(e)!==r&&(g.set(e,r),e.textContent=r)}(function(e){const t=function(){const e=Array.from(document.querySelectorAll(['iframe[name^="editor-canvas"]',".block-editor-inserter__preview-container__popover .block-editor-inserter__preview .block-editor-block-preview__content iframe",".block-editor-block-patterns-list .block-editor-block-preview__content iframe",".edit-site-page-content .block-editor-block-preview__content iframe"].join(",")));return e.length>0?e.map((e=>e.contentWindow.document)):[document]}().find((t=>t[a]===e));if(!t)return void console.warn("wpbbe-StyleEngine: No target document found for scope: "+e);let r=t.getElementById(m);return r||(r=t.createElement("style"),r.setAttribute("id",m),t.head.appendChild(r)),r}(i.current),u)}),[n,t,r,e])}(window.wpbbe=window.wpbbe||{})["editor-css-store"]=t})();